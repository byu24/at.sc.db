#cd into the directory keeping all the data
cd $BSCRATCH

#Create database directory
#Structure
mkdir at.sc.db
cd at.sc.db
mkdir data #final data generated, charts, etc.
mkdir log #log files from each step of the data processing
mkdir reports #any reports that are generated
mkdir scratch	#all in-progress work should be stored here and worked on here
mkdir src	#all working code should be stored here

#Create bin directory in home page for all software
cd $BSCRATCH
mkdir bin

#Install necessary software in bin directory
#SRATools from http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/current/sratoolkit.current-ubuntu64.tar.gz.
tar -zxvf sratoolkit.2.9.2-ubuntu64.tar.gz
#Add SRA Tools binaries into path to utilize executables
export PATH=$PATH:/global/projectb/scratch/byu24/bin/sratoolkit.2.9.6-1-ubuntu64/bin
#Download HKlibs, Bcftools, Samtools
git clone git://github.com/samtools/htslib.git
git clone git://github.com/samtools/bcftools.git
git clone git://github.com/samtools/samtools.git  
#cd into each directory
autoheader
autoconf
./configure prefix=/where/to/install #install it where you want it
make
make install

#Create a conda environment for executables
module load python3
conda create --mkdir --prefix=$BSCRATCH/env_STAR
source activate $BSCRATCH/env_STAR
conda install -c bioconda star

#Extract fastq files with fasterq-dump.

#Create batch script to pull multiple SRRs. Convert each batch script into executables
chmod +x denyer.sh #Only do once for batch script. Repeat for each batch script

#test to make sure the .sh files are executables
test -x denyer.sh && echo true || echo false #Repeat for each .sh file you want to set 

#Edit sbatch.sh file to include the correct file after "srun"
sbatch fastqpull.sh #Take note of job ID




